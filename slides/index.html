<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>DRY in Angular Templates: Content Projection im Praxiseinsatz</title>

    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/reveal.css" />
    <link rel="stylesheet" href="css/theme/night.css" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css" />

    <!-- Custom styling and tweaks -->
    <link rel="stylesheet" href="css/style.min.css" />

    <!-- Plugins -->
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
  </head>
  <body>
    <div class="reveal">
      <div class='footer'>
        FOOTER Use left and right arrows to navigate
      </div>

      <div class="slides">
        <section>
          <h2>DRY in Angular Templates: Content Projection im Praxiseinsatz</h2>
          <h3>Martin Grotz</h3>
          <div>TODO: MATHEMA Logo, Code Days Logo</div>
          <aside class="notes"></aside>
        </section>

        <section style="display: flex">
          <div style="">
            <h3>Einschränkungen</h3>
            <ul>
              <li>Angular 4 bis Angular 9</li>
              <li>Strukturen vom Beginn</li>
              <li>Keine Angular-Formulare</li>
              <li>Feste Browser-Version</li>
              <li>Performance wichtiger als schöner Code</li>
            </ul>
          </div>
          <div class="placeholder" style="">
            <!-- TODO: Logos von: Mathema, e.solutions, Porsche -->
            <img src="img/100px_placeholder.png" style="" />
          </div>
          <aside class="notes">
            <ul>
              <li>Projekt im Car-Infotainment, angepasster Browser</li>
              <li>Keine Erfahrungen mit Ivy</li>
              <li>Neue Erkenntnisse und Features fließen nur langsam ein</li>
            </ul>
          </aside>
        </section>

        <section>
          <div class="placeholder">
            <!-- TODO: Logo von Angular -->
            <img src="img/100px_placeholder.png" style="" />
          </div>
          <div>
            <h3>Angular</h3>
            <ul>
              <li>Framework</li>
              <li>Webtechnologien</li>
              <li>Komponentenorientiert</li>
              <li>Dependency Injection</li>
              <li>Automatische Change Detection</li>
            </ul>
          </div>
          <aside class="notes">
            <ul>
              <li>Von Google angetrieben</li>
              <li>Open Source</li>
            </ul>
          </aside>

        </section>

        <section>
          <h3>ng-content</h3>
          <aside class="notes">
            <ul>
              <li>Statische Projektion</li>
              <li>Zu projizierender Inhalt wird einfach zwischen die Tags des Wrapper-Elements geschrieben</li>
              <li>Element wird an einer Stelle ausgeschnitten und an anderer wieder eingefügt</li>
              <li>Beispiel: Wrapper-Komponente mit Funktionalität, wechselnder Inhalt</li>
            </ul>
          </aside>

        </section>

        <section>
          <img src="img/app-modal-simple_01.png" />
          <img src="img/app-ng-content-simple_01.png" />
          <img src="img/screenshot-simple-modal.png" />

          <aside class="notes">
            <ul>
              <li>Inhalt zwischen den Tags wird ausgeschnitten und an der Stelle mit ng-content im Modalen Dialog eingefügt</li>
              <li>Der eingefügte Inhalt kann beliebig sein</li>
            </ul>
          </aside>
        </section>

        <section>
          <h3>
            <ng-content select="..."></ng-content>
          </h3>

          <img src="img/app-ng-content-selectors_01.png" />
          <img src="img/app-modal-selectors_01.png" />
          <img src="img/screenshot-modal-selectors_01.png" />

          <aside class="notes">
            <ul>
              <li>Verschiedene Komponenten, die jeweils wieder irgendwas enthalten</li>
              <li>app-text-wrapper enthält nochmal eine Unterkompomente app-text mit einem Paragraph drin</li>
              <li>In ng-content kann mit select ein CSS-Selektor angegeben werden, der dann nur passende Inhalte in diesem ng-content anzeigt</li>
              <li>Wenn man keinen "Lumpensammler" ohne select hat, werden ggf. nirgends passende Inhalte dann auch nirgends angezeigt</li>
            </ul>
          </aside>
        </section>

        <section>
          <h3>Lifecycle Reihenfolge</h3>

          <img src="img/ng-content-lifecycle-elements_01.png" />
          <img src="img/ng-content-lifecycle_01.png" />

          <aside class="notes">
            <ul><li>
              Angular Lifecycle Hooks:
                <ol>
                  <li>ngOnInit: Inputs</li>
                  <li>ngAfterContentInit: statischer Content</li>
                  <li>ngAfterContentChecked: Change Detection im statischen Content</li>
                  <li>ngAfterViewInit: dynamischer Content</li>
                  <li>ngAfterViewChecked: Change Detection im dynamischen Content</li>
                </ol>
            </li>
          <li>
            Mit ng-content muss beachtet werden, dass jede Lifecycle-Phase "depth first" initialisiert wird
          </li>
          <li>Bei mehrfacher Verschachtelung wird es unübersichtlich (siehe text in text-wrapper, und list-item in text)</li>
        <li>
          Gefährlich: In Lifecycle-Hooks ChangeDetection mit detectChanges erzwingen: Elternkomponenten sind noch nicht fertig initialisiert, ggf. unerwartete undefined Werte bei Inputs, ViewChild, ContentChild
        </li></ul>
          </aside>
        </section>

        <section>
          <h3 class="placeholder">Verschachtelte Komponenten</h3>
        </section>

        <section>
          <h3 class="placeholder">ContentChildren, static</h3>
        </section>

        <section>
          <h3 class="placeholder">
            Problem: 2x projizieren nicht möglich, weil ausgeschnitten
          </h3>
        </section>

        <section>
          <h3 class="placeholder">
            Problem: Direktive oben soll Style innen beeinflussen -> style
            encapsulation funkt dazwischen, :host-content
          </h3>
        </section>

        <section>
          <h3 class="placeholder">
            Problem: Injector Tree - Zugriff in projizierter Komponente auf
            Wrapper nicht möglich
          </h3>
        </section>

        <section>
          <h3 class="placeholder">ng-template</h3>
        </section>

        <section>
          <h3 class="placeholder">
            ng-template einfaches Beispiel: Liste mit Array als Input und n
            Einträgen
          </h3>
        </section>

        <section>
          <h3 class="placeholder">ngTemplateOutlet context implicit/explicit</h3>
        </section>

        <section>
          <h3 class="placeholder">Lifecycle & Reihenfolge innen/außen</h3>
        </section>

        <section>
          <h3 class="placeholder">ViewChildren, QueryList Probleme</h3>
        </section>

        <section>
          <h3 class="placeholder">
            Verschiedene Templates mit Direktive/anhand Property
          </h3>
        </section>

        <section>
          <h3 class="placeholder">Problem: Style-Encapsulation</h3>
        </section>

        <section>
          <h3 class="placeholder">
            Problem: Injector Tree - Zugriff in projizierter Komponente auf
            Wrapper nicht möglich
          </h3>
        </section>

        <section>
          <h3 class="placeholder">
            Performance: trackBy, Komponenten-Recycling, Aufbau/Abbau teuer
          </h3>
          <div>TODO: Screenshot flamechart aus echtem Projekt</div>
        </section>

        <section>
          <h3 class="placeholder">Doku-Links</h3>
        </section>

        <section>
          <h3 class="placeholder">Fragen/Danke</h3>
        </section>
      </div>
    </div>

    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.configure({
        transition: "none",
        history: "true",
      });
      Reveal.initialize({
        hashOneBasedIndex: false,
        controls: false,
        slideNumber: 'c/t',
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
